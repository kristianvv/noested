<!-- To display a single service order with its checklist when a mechanic selects it -->
@model ServiceOrderModel

<h1>View Service Order</h1>

@section Styles {
    <link rel="stylesheet" href="~/css/Checklist.css" asp-append-version="true">
}


<form id="serviceOrderForm" asp-controller="Mechanic" asp-action="SaveCompletedOrder" method="post">
    <!-- Display Static Order Info -->
    <section class="order-info">
        <section class="left-panel">
            <!-- Left panel -->
            <div>
                <label>Serviceordre ID</label> <!-- Serviceordre ID (int) -->
                <input id="service_order_id" type="text" name="ServiceOrderID" readonly value="@Model.ServiceOrderID" />
            </div>

            <div>
                <label>Kunde ID</label> <!-- Kunde ID (int)-->
                <input id="customer_id" type="text" name="CustomerID" readonly value="@Model.Customer!.CustomerID" />
            </div>

            <div>
                <label>Produktnavn</label> <!-- Produktnavn (f.eks "Igland 2501") -->
                <input id="product_name" type="text" name="ProductName" readonly value="@Model.ProductName" />
            </div>

            <div>
                <label>Produkttype</label> <!-- Produkttype (f.eks "Vinsj") -->
                <input id="product_type" type="text" name="ProductType" readonly value="@Model.ProductType" />
            </div>
        </section>
        <!-- Right panel -->
        <section class="right-panel">
            <div>
                <label>Status for Serviceordre</label> <!-- Ordrestatus (f.eks 'Uåpnet' eller 'Fullført')-->
                <input id="service_order_status" type="text" name="ServiceOrderStatus" readonly value="@Model.ServiceOrderStatus" />
            </div>
            <div>
                <label>Mottatt Ordre Dato</label> <!-- Opprettet Dato -->
                <input id="order_received" type="text" name="OrderReceived" readonly value="@Model.OrderReceived" />
            </div>
        </section>
    </section>

    <section class="customer-comments">
        <h2>Kundens Problembeskrivelse</h2> <!-- Kundens  -->
        <textarea id="customer_comments" name="CustomerComment" readonly>@Model.CustomerComment</textarea>
    </section>

    <!-- Skjulte felt -->
    <input id="order_completed" type="hidden" name="OrderCompleted" readonly value="@Model.OrderCompleted" />
    <input id="agreed_finished_date" type="hidden" name="AgreedFinishedDate" readonly value="@Model.AgreedFinishedDate">
    <input id="serial_number" type="hidden" name="SerialNumber" readonly value="@Model.SerialNumber">
    <input id="model_year" type="hidden" name="ModelYear" readonly value="@Model.ModelYear">
    <input id="warranty" type="hidden" name="Warranty" readonly value="@Model.Warranty">
    <input id="work_hours" type="hidden" name="WorkHours" readonly value="@Model.WorkHours">

    <!-- Checklist Section -->
    <section id="checklistSection">
        <table class="table table-bordered mb-3" id="checklistTable">
            <thead>
                <tr>
                    <th>Kategorier</th>
                    <th>Sjekkpunkter</th>
                    <th>OK</th>
                    <th>Bør Skiftes</th>
                    <th>Defekt</th>
                </tr>
            </thead>
            <tbody id="itemRows" name="Checklists">
                <!-- Genereres av JS-filen-->
            </tbody>
        </table>

        <!-- Mekaniker kommentar -->
        <div class="mb-3">
            <label for="RepairDescription" class="form-label">Beskrivelse av Reparasjoner</label>
            <textarea class="form-control" id="RepairDescription" name="RepairDescription"></textarea>
        </div>
    </section>

    <button type="submit" class="btn btn-success">Ferdigstill Ordre</button>
</form>


@section Scripts {
    <script src="~/js/categoryitems.js"></script>
    <script src="/js/serviceorder.js"></script>
}



